<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DJs</title>
  <link rel="stylesheet" href="style.css?v=1">
</head>

<body>

  <!-- Navigation -->
  <div class="navbar">
    <a href="index.html">Home</a>
    <a href="dancers.html">Dancers</a>
    <a href="battle.html">Battle</a>
    <a href="djs.html" class="active">DJs</a>
    <a href="vote.html">Vote</a>
    <a href="merch.html">Merch</a>
  </div>

  <div class="page-container">
    <h1>Submit Your DJ Mix</h1>

    <p style="text-align:center; margin-bottom:20px;">
      Paste your SoundCloud mix URL and choose Left or Right.
    </p>

    <div class="battle-card" style="max-width:600px;">

      <label>DJ Side</label>
      <select id="djSide" class="input-field">
        <option value="DJ Left">DJ Left</option>
        <option value="DJ Right">DJ Right</option>
      </select>

      <label style="margin-top:15px;">SoundCloud Mix URL</label>
      <input id="scURL" class="input-field" type="text" placeholder="https://soundcloud.com/...">

      <button class="vote-button" style="margin-top:20px;" onclick="submitDJ()">
        Submit Mix
      </button>

      <p id="status" style="text-align:center; margin-top:15px; color:#0077cc;"></p>

    </div>
  </div>

  <script>
    const BASE_URL =
      "https://script.google.com/macros/s/AKfycbyfiIlExm-_OC9ULZHPaNkIaJ7RWKRDbkTSplu6_8A37cEy5Ph1YAdjF58dwF3uEntOdQ/exec";

    function submitDJ() {
      const side = document.getElementById("djSide").value;
      const url = document.getElementById("scURL").value.trim();
      const status = document.getElementById("status");

      if (!url || !url.includes("soundcloud.com")) {
        status.textContent = "Please enter a valid SoundCloud URL.";
        status.style.color = "red";
        return;
      }

      const logURL =
        BASE_URL +
        "?mode=logdj" +
        "&dj=" + encodeURIComponent(side) +
        "&soundcloud=" + encodeURIComponent(url);

      fetch(logURL, { method: "GET", mode: "no-cors" })
        .then(() => {
          status.textContent = "Mix submitted successfully!";
          status.style.color = "#0077cc";
          document.getElementById("scURL").value = "";
        })
        .catch(() => {
          status.textContent = "Error submitting mix.";
          status.style.color = "red";
        });
    }
  </script>

</body>
</html>
