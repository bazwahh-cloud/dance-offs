<script>
  // Your real Google Apps Script endpoint
  const SHEET_URL = "https://script.google.com/macros/s/AKfycbyfiIlExm-_OC9ULZHPaNkIaJ7RWKRDbkTSplu6_8A37cEy5Ph1YAdjF58dwF3uEntOdQ/exec";

  // Extract YouTube video ID from ANY format
  function extractVideoID(raw) {
    if (!raw) return null;
    const url = raw.trim();

    const vMatch = url.match(/[?&]v=([^&#]+)/);
    if (vMatch) return vMatch[1];

    const shortMatch = url.match(/youtu\.be\/([^?&#]+)/);
    if (shortMatch) return shortMatch[1];

    const shortsMatch = url.match(/shorts\/([^?&#]+)/);
    if (shortsMatch) return shortsMatch[1];

    const embedMatch = url.match(/embed\/([^?&#]+)/);
    if (embedMatch) return embedMatch[1];

    const pathMatch = url.match(/youtube\.com\/([^?&#]+)/);
    if (pathMatch) {
      const parts = pathMatch[1].split("/");
      return parts.pop();
    }

    return null;
  }

  // Log to your existing Google Sheet
  function logToSheet(side, url) {
    const fullURL =
      SHEET_URL +
      "?dancer=" + encodeURIComponent(side) +
      "&url=" + encodeURIComponent(url);

    // Fire-and-forget GET request
    fetch(fullURL, { method: "GET", mode: "no-cors" })
      .catch(() => {}); // Prevents any logging errors from blocking video load
  }

  // Load left video + log URL
  function loadLeft() {
    const url = document.getElementById("leftInput").value;
    const id = extractVideoID(url);

    if (id) {
      const embedURL = `https://www.youtube.com/embed/${id}?autoplay=1&mute=1&playsinline=1`;

      // Update iframe FIRST
      document.getElementById("leftVid").src = embed
